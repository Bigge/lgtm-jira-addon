language: java

# only build automatically for the master branch
branches:
  only:
  - master
# NB PRs should also be built automatically

# ensure Atlassian SDK is installed
addons:
  apt:
    sources:
    - sourceline: deb https://packages.atlassian.com/atlassian-sdk-deb stable contrib
      key_url: https://packages.atlassian.com/api/gpg/key/public
    packages:
    - atlassian-plugin-sdk -q
    
# test against supported versions of Jira
env:
  - JIRA_VERSION=7.13.1
  - JIRA_VERSION=7.12.3

# skip the default install step defined for java
install: true

# define a custom build step
script: atlas-clean -q && travis_wait atlas-integration-test -q -Djira.version=$JIRA_VERSION
